<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>

<body>
    <div id="root"></div>
    <script src="react.development.js"></script>
    <script src="react-dom.development.js"></script>
    <script src="browser.min.js"></script>

    <script type="text/babel">
        class Main extends React.Component{
            constructor(){
                super();
                this.state = {
                    num : 120,
                    name1:"A",
                    name2:"B",
                    num1:70,
                    num2:100,
                }
                this.changeNum1=this.changeNum1.bind(this)
                this.changeNum2=this.changeNum2.bind(this)
            }
            changeNum1(val){
                if(this.state.num-val<0||this.state.num<0){
                    alert("不可以")
                }
                else{
                    this.setState({
                    num1:this.state.num1+val*1,
                    num:this.state.num-val
                })
                }

            }
            changeNum2(val){
                if(this.state.num-val<0||this.state.num<0){
                    alert("不可以")
                }
                else{
                    this.setState({
                    num2:this.state.num2+val*1,
                    num:this.state.num-val
                })
                }
                
            }
            render(){
                return(
                    <div>
                    <h1>剩余人数: {this.state.num}</h1>
                    <Children1 name={this.state.name1} num={this.state.num1} changeNum={this.changeNum1}></Children1>
                    <Children1 name={this.state.name2} num={this.state.num2} changeNum={this.changeNum2}></Children1>
                </div>
                )
            }
        }

        class Children1 extends React.Component{
            render(){
                return(
                    <div>
                        <h5>将军{this.props.name} 有士兵：{this.props.num}</h5>
                        <input type="text" ref="name9"/>
                        <button onClick={()=>{
                            this.props.changeNum(this.refs.name9.value)
                            this.refs.name9.value=""
                        }}>click</button>
                    </div>
                    
                )
            }
        }
        ReactDOM.render(
            <Main></Main>,
            document.getElementById('root')

        )
    </script>

</body>

</html>